(function(){var t={19577:function(t,e,n){"use strict";var i=n(73513),a=n(49242),s=n(73396);function r(t,e,n,i,a,r){const o=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(o)}var o=n(15941);const{EventHubConsumerClient:c}=n(17294);var d={data(){return{}},components:{},created(){this.receiveEventHubData()},mounted(){},methods:{async receiveEventHubData(){const t="Endpoint=sb://iothub-ns-adt-3d-24613603-b45c1d4b80.servicebus.windows.net/;SharedAccessKeyName=iothubowner;SharedAccessKey=jl8sv+mgHmKgLzKfkNbrBnIrj6+p+jrx2g+8pWRyeyo=;EntityPath=adt-3d",e="adt-3d",n="forweb";o.log(`connectionString: ${t}`),o.log(`eventHubName: ${e}`),o.log(`consumerGroup: ${n}`);const i=new c(n,t,e);this.subscription=i.subscribe({processEvents:async(t,e)=>{if(o.log(`\nevents: ${JSON.stringify(t)}`),t[0]["body"].hasOwnProperty("status")){o.log(`type: ${t[0].body.status.type}`);let e=-1;"error"===t[0].body.status.type?e=2:"inOperation"===t[0].body.status.type?e=1:"idle"===t[0].body.status.type&&(e=0),this.$store.commit("setMachineStatus",{status:e})}t[0]["body"].hasOwnProperty("statistics")&&this.$store.commit("setMachineStatistics",{standardDeviation:t[0].body.statistics.standardDeviation,average:t[0].body.statistics.average,uniformity:t[0].body.statistics.uniformity,max:t[0].body.statistics.max,min:t[0].body.statistics.min,maxMin:t[0].body.statistics.maxMin}),await e.updateCheckpoint(t[t.length-1])}})}}},l=n(40089);const u=(0,l.Z)(d,[["render",r]]);var h=u,m=n(22483),v=n(87139);const f=t=>((0,s.dD)("data-v-54c8e356"),t=t(),(0,s.Cn)(),t),g=f((()=>(0,s._)("div",{class:"title"}," 12 吋晶圓膜厚機 - 狀態資訊 ",-1))),p={key:0,class:"badge badge-secondary device-status"},y={key:1,class:"badge badge-success device-status"},b={key:2,class:"badge badge-warning device-status"},_={key:3,class:"badge badge-danger device-status"},w=f((()=>(0,s._)("div",{class:"title"}," 12 吋晶圓膜厚機 - 統計資訊 ",-1))),C={class:"card"},x=f((()=>(0,s._)("span",{class:"card-title"},"Standard Deviation",-1))),S={class:"card-text"},k=f((()=>(0,s._)("span",null,"Å",-1))),D={class:"card"},M=f((()=>(0,s._)("span",{class:"card-title"},"Average",-1))),$={class:"card-text"},O=f((()=>(0,s._)("span",null,"Å",-1))),T={class:"card"},L=f((()=>(0,s._)("span",{class:"card-title"},"Uniformity",-1))),j={class:"card-text"},E=f((()=>(0,s._)("span",null,"Å",-1))),P={class:"card"},z=f((()=>(0,s._)("span",{class:"card-title"},"Max",-1))),A={class:"card-text"},K=f((()=>(0,s._)("span",null,"Å",-1))),U={class:"card"},N=f((()=>(0,s._)("span",{class:"card-title"},"Min",-1))),H={class:"card-text"},W=f((()=>(0,s._)("span",null,"Å",-1))),B={class:"card"},Z=f((()=>(0,s._)("span",{class:"card-title"},"Max - Min",-1))),I={class:"card-text"},R=f((()=>(0,s._)("span",null,"Å",-1))),q={id:"renderCanvas",ref:"renderCanvas"};function F(t,e,n,i,r,o){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",{class:(0,v.C_)(["list",{collapsed:r.isActive}])},[(0,s._)("div",{id:"status",onClick:e[0]||(e[0]=(...t)=>o.handleClick&&o.handleClick(...t)),onKeyup:e[1]||(e[1]=(0,a.D2)(((...t)=>o.handleClick&&o.handleClick(...t)),["enter"]))},[g,(0,s._)("div",null,[(0,s.Uk)(" 目前機台 "),-1==t.machineStatus?((0,s.wg)(),(0,s.iD)("span",p," 關機中 ")):0==t.machineStatus?((0,s.wg)(),(0,s.iD)("span",y," 閒置中 ")):1==t.machineStatus?((0,s.wg)(),(0,s.iD)("span",b," 運作中 ")):2==t.machineStatus?((0,s.wg)(),(0,s.iD)("span",_," 發生問題 ")):(0,s.kq)("",!0)])],32),(0,s._)("div",{id:"statistics",onClick:e[2]||(e[2]=(...t)=>o.handleClick&&o.handleClick(...t)),onKeyup:e[3]||(e[3]=(0,a.D2)(((...t)=>o.handleClick&&o.handleClick(...t)),["enter"]))},[w,(0,s._)("div",C,[x,(0,s._)("p",S,[(0,s.Uk)((0,v.zw)(t.standardDeviation)+" ",1),k])]),(0,s._)("div",D,[M,(0,s._)("p",$,[(0,s.Uk)((0,v.zw)(t.average)+" ",1),O])]),(0,s._)("div",T,[L,(0,s._)("p",j,[(0,s.Uk)((0,v.zw)(t.uniformity)+" ",1),E])]),(0,s._)("div",P,[z,(0,s._)("p",A,[(0,s.Uk)((0,v.zw)(t.max)+" ",1),K])]),(0,s._)("div",U,[N,(0,s._)("p",H,[(0,s.Uk)((0,v.zw)(t.min)+" ",1),W])]),(0,s._)("div",B,[Z,(0,s._)("p",I,[(0,s.Uk)((0,v.zw)(t.maxMin)+" ",1),R])])],32)],2),(0,s._)("canvas",q,null,512)])}var G=n(20065),J=(n(53279),n(41617)),V=n(15941),Y={name:"BabylonScene",data(){return{isActive:!1,refScene:null}},computed:{...(0,G.rn)(["machineStatus","standardDeviation","average","uniformity","max","min","maxMin"]),status(){return this.$store.state.machineStatus}},watch:{machineStatus:{deep:!0,handler(t){V.log(`The machine status has changed: ${t}`),this.setTricolorLight(t)}}},mounted(){const t=this.$refs.renderCanvas;if(t.width=window.innerWidth,t.height=window.innerHeight,t){const e=new J.D4V(t),n=new J.xsS(e);this.refScene=n,n.clearColor=new J.Wot(192,221,255);new J.YfP("Camera",0,.8,10,J.Pa4.Zero(),n);J.n0n.Append("assets/","semi-v1.glb",n,(()=>{n.activeCamera=null,n.createDefaultCameraOrLight(!0),n.createDefaultEnvironment(),n.activeCamera.attachControl(t,!1)})),e.runRenderLoop((()=>{n.render()})),window.addEventListener("resize",(()=>{e.resize()}))}},methods:{handleClick(){V.log("點擊了 div"),this.isActive=!this.isActive},initTricolorLight(t="",e=1,n=1,i=1){V.log(`initTricolorLight__meshName: ${t}`),V.log(`initTricolorLight__r: ${e}`),V.log(`initTricolorLight__g: ${n}`),V.log(`initTricolorLight__b: ${i}`);const a=["Cylinder.022","Cylinder.020","Cylinder.018"];if(a.forEach((t=>{const e=new J.KuD(this.refScene);e.alpha=1,e.diffuseColor=new J.Wot(1,1,1),this.refScene.getMeshByName(t).material=e})),""!==t){const a=new J.KuD(this.refScene);a.alpha=1,a.diffuseColor=new J.Wot(e,n,i),this.refScene.getMeshByName(t).material=a}},setTricolorLight(t){V.log(`setTricolorLight__status: ${t}`),2===t?this.initTricolorLight("Cylinder.022",1,0,0):1===t?this.initTricolorLight("Cylinder.020",1,.57,0):0===t&&this.initTricolorLight("Cylinder.018",0,1,0)}}};const Q=(0,l.Z)(Y,[["render",F],["__scopeId","data-v-54c8e356"]]);var X=Q;const tt=[{path:"/",name:"home",component:X}],et=(0,m.p7)({history:(0,m.r5)(),routes:tt});var nt=et,it=n(15941),at=(0,G.MT)({state:{machineStatus:-1,standardDeviation:0,average:0,uniformity:0,max:0,min:0,maxMin:0},getters:{},mutations:{setMachineStatus(t,e){t.machineStatus=e.status,it.log(`machine.status: ${e.status}`)},setMachineStatistics(t,e){t.standardDeviation=e.standardDeviation,t.average=e.average,t.uniformity=e.uniformity,t.max=e.max,t.min=e.min,t.maxMin=e.maxMin,it.log(`machine.standardDeviation: ${e.standardDeviation}`),it.log(`machine.average: ${e.average}`),it.log(`machine.uniformity: ${e.uniformity}`),it.log(`machine.max: ${e.max}`),it.log(`machine.min: ${e.min}`),it.log(`machine.maxMin: ${e.maxMin}`)}},actions:{},modules:{}});n(48052);(0,a.ri)(h).use(i.ZP),(0,a.ri)(h).use(at).use(nt).mount("#app")},25868:function(){},80090:function(){},5041:function(){}},e={};function n(i){var a=e[i];if(void 0!==a)return a.exports;var s=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=t,function(){var t=[];n.O=function(e,i,a,s){if(!i){var r=1/0;for(l=0;l<t.length;l++){i=t[l][0],a=t[l][1],s=t[l][2];for(var o=!0,c=0;c<i.length;c++)(!1&s||r>=s)&&Object.keys(n.O).every((function(t){return n.O[t](i[c])}))?i.splice(c--,1):(o=!1,s<r&&(r=s));if(o){t.splice(l--,1);var d=a();void 0!==d&&(e=d)}}return e}s=s||0;for(var l=t.length;l>0&&t[l-1][2]>s;l--)t[l]=t[l-1];t[l]=[i,a,s]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var a,s,r=i[0],o=i[1],c=i[2],d=0;if(r.some((function(e){return 0!==t[e]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var l=c(n)}for(e&&e(i);d<r.length;d++)s=r[d],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(l)},i=self["webpackChunkvue_d3_blender"]=self["webpackChunkvue_d3_blender"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(19577)}));i=n.O(i)})();
//# sourceMappingURL=app.022a144c.js.map